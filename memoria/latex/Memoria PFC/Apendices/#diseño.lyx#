#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass ociamthesis-lyx
\options a4paper,titlepage
\use_default_options false
\maintain_unincluded_children false
\language spanish
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing onehalf
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 0
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 0
\use_package mhchem 1
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine natbib
\cite_engine_type numerical
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle fancy
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Diseño de la aplicación
\end_layout

\begin_layout Standard
En este anexo se presenta una descripción del diseño que se llevo a cabo
 antes de realizar la implementación de la plataforma y durante las revisiones
 de esta.
 A lo largo del anexo se mostrará el modelado de la base de datos, diagrama
 de clases, casos de usos y traza de eventos, así como la descripción de
 los distintos módulos creados.
 Este documento no ha sido creado con el fin de ser completamente riguroso
 a las convenciones, aunque más de una vez se sigan, sino que el fin último
 es que el lector comprenda este documento.
\end_layout

\begin_layout Section
Diagrama de Clases
\end_layout

\begin_layout Standard
En un primer lugar se va a mostrar sin profundizar el diagrama de clases
 que hace uso de la base de datos, representando únicamente el modelo estático
 del sistema, el cual se puede ver en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "diagrama_alto_nivel1"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/schema1_alto_nivel.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de clases en alto nivel de la aplicación
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "diagrama_alto_nivel1"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Observando con mas detenimiento la clase 
\emph on
Question
\emph default
, cada tipo de pregunta desciende de la clase 
\emph on
Question
\emph default
, en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "diagrama_question"

\end_inset

 se puede ver con mas detalle.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/preguntas.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de clases de Question
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "diagrama_question"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Por otra parte, para el experimento 
\emph on
"¿Como son nuestos voluntarios?"
\emph default
 Se creo una serie de clases para los distintos juegos y sorteos, como se
 puede ver en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "diagrama_games_sin_detalle"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/games_sin_detalle.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de clases de Games
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "diagrama_games_sin_detalle"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "diagrama_game"

\end_inset

 se puede ver con mas detenimiento la clase 
\emph on
Game.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/games.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama detallado de la clase de Game
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "diagrama_game"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Como hemos dicho anteriormente estos diagramas solo hacen referencia al
 modelo estático del sistema, no así a las demás clases que interactúan
 con estas, como puede ser los distintos formularios y validadores web usados
 para la representación del modelo.
\end_layout

\begin_layout Subsection
Entidades del sistema
\end_layout

\begin_layout Standard
A continuación vamos a describir las entidades del sistema:
\end_layout

\begin_layout Subsubsection
User, usuario
\end_layout

\begin_layout Standard
Un usuario es una persona que se registra en la plataforma para poder hacer
 uso de ella, ya sea creando encuestas o contestándolas.
 Además guarda los permisos que posee dicho usuario dentro de la plataforma,
 pudiendo tener un rol de investigador o de voluntario.
\end_layout

\begin_layout Subsubsection
Survey, encuesta
\end_layout

\begin_layout Standard

\emph on
Survey
\emph default
 sería la cabecera de la encuesta, en la que están definidas los atributos
 y las limitaciones de está, como puede ser la fecha durante la que estará
 activa la encuesta, la duración de esta, o simplemente el título y la descripci
ón d eesta.
\end_layout

\begin_layout Subsubsection
Consent, consentimiento
\end_layout

\begin_layout Standard

\emph on
Consent
\emph default
 almacena los consentimientos que debe aceptar un usuario para realizar
 una encuesta.
 Cada consentimiento pertenece a una encuesta.
\end_layout

\begin_layout Subsubsection
Section, sección
\end_layout

\begin_layout Standard

\emph on
Section
\emph default
 sirven para definir los distintas secciones organizativas que posee una
 encuesta, a su vez una sección puede contener mas secciones.
 Además en cada sección se puede definir si son secciones exclusivas respecto
 a las secciones del mismo nivel, así como definir el nombre y la probabilidad
 de realizar dicha sección de la encuesta.
 Al final las secciones generan un árbol que cuelga de una encuesta.
\end_layout

\begin_layout Subsubsection
Question, pregunta
\end_layout

\begin_layout Standard

\emph on
Question
\emph default
 almacena una pregunta de la encuesta.
 Las preguntas pueden ser de distinto tipo, cada una tiene su propia clase
 que hereda de 
\emph on
Question
\emph default
.
 Cada pregunta está definida dentro de una sección.
\end_layout

\begin_layout Paragraph
QuestionText, preguntas de texto
\end_layout

\begin_layout Standard
Almacena preguntas cuya respuesta es texto, almacena también las limitaciones
 que pueda tener la respuesta, como puede ser si es un número entero, decimal
 o viene limitado por una expresión regular.
\end_layout

\begin_layout Paragraph
QuestionYN, preguntas de si o no
\end_layout

\begin_layout Standard
Hace referencia a las preguntas cuya respuesta es si o no.
\end_layout

\begin_layout Paragraph
QuestionChoice, preguntas de elección
\end_layout

\begin_layout Standard
Contiene las distintas opciones posibles en las preguntas cuyo rango de
 respuestas está predeterminado.
 También guarda información de como representar estás opciones al usuario.
\end_layout

\begin_layout Paragraph
QuestionLikerScala, preguntas de escala likert
\end_layout

\begin_layout Standard
Almacena la información necesaria para las preguntas likert.
\end_layout

\begin_layout Subsubsection
Condition, condición
\end_layout

\begin_layout Standard

\emph on
Condition
\emph default
 hace referencia a las preguntas dependientes de la respuesta de otra pregunta.
 Guardando que pregunta depende de quién así como las condiciones necesarias
 para mostrar dicha pregunta.
\end_layout

\begin_layout Subsubsection
Answer, respuesta.
\end_layout

\begin_layout Standard
Guarda la respuesta que ha dado un usuario a una pregunta, así como el tiempo
 empleada en ella.
\end_layout

\begin_layout Subsubsection
StateSurvey, estado de la encuesta
\end_layout

\begin_layout Standard
Almacena la información relativa del estado en el que se encuentra una encuesta
 por parte de un usuario, guardando entre otras cosas la sección por la
 que va, el tiempo empleado o el estado de la encuesta.
\end_layout

\begin_layout Subsection
Entidades del sistema del proyecto "¿Cómo son nuestros voluntarios?"
\end_layout

\begin_layout Standard
A continuación vamos a describir las entidades creadas para el proyecto
 
\emph on
"¿Cómo son nuestros voluntarios?"
\end_layout

\begin_layout Subsubsection
Rafle, rifa
\end_layout

\begin_layout Standard
En el sorteo que hay dentro del proyecto, 
\emph on
rafle
\emph default
 se encarga de decidir si el usuario es premiado o no y guarda la cantidad
 ganada.
\end_layout

\begin_layout Subsubsection
GameImpatience, juego de la impaciencia
\end_layout

\begin_layout Standard
Hace referencia a los resultados de las decisiones tomadas en el juego de
 la impaciencia, que depende únicamente solo de un usuario.
\end_layout

\begin_layout Subsubsection
Game
\end_layout

\begin_layout Standard
Dentro del proyecto existen varios juegos que involucran a dos usuarios,
 cada juego depende de las decisiones tomadas en las respuestas de la encuesta.
 Cada juego hereda de esta entidad
\end_layout

\begin_layout Paragraph
GameLottery1, juego de la lotería 1
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en la primera versión del juego
 de la lotería, descrita en el ANEXO X
\end_layout

\begin_layout Paragraph
GameLottery2, juego de la lotería 2
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en la segunda versión del juego
 de la lotería, descrita en el ANEXO X
\end_layout

\begin_layout Paragraph
GameRent1, juego de la renta 1
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en la primera versión del juego
 de la renta, descrita en el ANEXO X
\end_layout

\begin_layout Paragraph
GameRent2, juego de la renta 2
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en la segunda versión del juego
 de la renta, descrita en el ANEXO X
\end_layout

\begin_layout Paragraph
GameUltimatum, juego del ultimatum
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en el juego del ultimatum, descrita
 en el ANEXO X
\end_layout

\begin_layout Paragraph
GameDictador, juego del dictador
\end_layout

\begin_layout Standard
Guarda la información de la decisión tomada en el juego del dictador, descrita
 en el ANEXO X
\end_layout

\begin_layout Section
Esquema Relacional
\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "esquema_relacional"

\end_inset

 mostramos el esquema relacional, generado por el ORM SQLAlchemy.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/schema_bbdd.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Esquema relacional
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "esquema_relacional"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Durante el diseño se tuvo que tomar la decisión de como implementar las
 clases heredaras, si todas en la misma tabla, en distintas o algunas compartien
do tabla y otras no.
 Se decidió que todas compartirían la misma tabla, sobre todo a que no se
 espera una gran cantidad de entradas, mas comparándolo con otras tablas
 como puede ser 
\emph on
Answer
\emph default
.
\end_layout

\begin_layout Standard
Aunque no se aprecia en el esquema, existen las siguientes restricciones
 en la declaración del modelo que se trasladan a la base de datos:
\end_layout

\begin_layout Itemize
Tabla 
\series bold
stateSurvey
\series default
, la tupla 
\emph on
user_id
\emph default
 y 
\emph on
survey_id
\emph default
 es única.
\end_layout

\begin_layout Itemize
Tabla 
\series bold
condition
\series default
, la tupla 
\emph on
subquestion_id
\emph default
 y 
\emph on
parent_id
\emph default
 es única.
 
\end_layout

\begin_layout Itemize
Tabla 
\series bold
answer
\series default
, la tupla 
\emph on
user_id
\emph default
 y 
\emph on
question_id
\emph default
 es única.
\end_layout

\begin_layout Itemize
Tabla 
\series bold
user
\series default
, el valor de 
\emph on
email
\emph default
 es único.
\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "esquema_relacional_juegos"

\end_inset

 se muestra el esquema relacional, donde se guardan los resultados de los
 distintos juegos y sorteos
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/schema_bbdd_game.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Esquema relacional de los juegos
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "esquema_relacional_juegos"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Las restricciones de estas tablas son las siguientes:
\end_layout

\begin_layout Itemize
Tabla 
\series bold
gameImpatience
\series default
, la tupla 
\emph on
user_id
\emph default
 y 
\emph on
survey_id
\emph default
 es única.
\end_layout

\begin_layout Itemize
Tabla 
\series bold
raffle
\series default
, la tupla 
\emph on
user_id
\emph default
 y 
\emph on
survey_id
\emph default
 es única.
\end_layout

\begin_layout Itemize
Tabla 
\series bold
game
\series default
, la tupla 
\emph on
userA_id
\emph default
, 
\emph on
userB_id
\emph default
 y s
\emph on
urvey_id
\emph default
 es única.
\end_layout

\begin_layout Section
Casos de Uso 
\end_layout

\begin_layout Standard
En esta sección vamos a analizar los posibles usos que podrán darse a la
 plataforma.
 Para ilustarlo vamos a emplear algunos diagramas de casos de uso y trazas
 de eventos.
\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "casos_uso_voluntario"

\end_inset

 podemos ver los posibles usos generales que le puede dar un usuario que
 sea un voluntario.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/voluntario.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de casos de uso de un voluntario
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "casos_uso_voluntario"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "casos_uso_investigador"

\end_inset

 podemos ver los posibles usos generales que le puede dar un usuario que
 sea un investigador.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/investigador.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de casos de uso de un investigador
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "casos_uso_investigador"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "casos_uso_administrador"

\end_inset

 podemos ver los posibles usos generales que le puede dar un usuario que
 sea un administrador.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/Administrador.svg

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de casos del administrador
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "casos_uso_administrador"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "traza de eventos"

\end_inset

 podemos ver una traza de eventos genérica que corresponde a la situación
 en la que un usuario rellena un formulario y lo envía a la plataforma,
 esta información es enviada al controlador de la aplicación, que procede
 a comprobar los permisos del usuario y validar el formulario.
 Una vez que es valido se modifica el modelo con los nuevos datos y se devuelve
 una nueva vista al usuario.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/traza de eventos.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ejemplo de traza de eventos genérico
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "traza de eventos"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Módulos de la plataforma
\end_layout

\begin_layout Standard
Para la elaboración de las plataformas se ha seguido las recomendaciones
 dadas por los desarrolladores de Flask:
\end_layout

\begin_layout Standard
http://flask.pocoo.org/docs/becomingbig/
\end_layout

\begin_layout Standard
https://github.com/mitsuhiko/flask/wiki/Large-app-how-to
\end_layout

\begin_layout Standard
http://mattupstate.com/python/2013/06/26/how-i-structure-my-flask-applications.htm
l?utm_medium=referral&utm_source=pulsenews
\end_layout

\begin_layout Standard
Como se puede ver en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "modulos_sistema"

\end_inset

, se ha dividido la plataforma en distintos módulos, agrupando estas a nivel
 de funcionalidades.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /home/julio/flask/frame_game_theory/memoria/latex/Memoria PFC/figures/módulos.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Módulos del sistema
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "modulos_sistema"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Los módulos con lo que se puede interactuar visualmente a través de un navegador
 tienen la siguiente estructura:
\end_layout

\begin_layout Itemize

\series bold
Vistas
\series default
: La vista de una función es donde una petición HTTP cumple con la lógica
 del programa.
 Es decir cada función tiene definida una ruta web por la que se puede acceder.
 En un modelo MVC, sería parte del controlador.
 Es esta función es donde los datos de la petición HTTP se traducen a una
 llamada a la lógica de la aplicación produciendo una respuesta.
 
\end_layout

\begin_layout Itemize

\series bold
Formularios
\series default
: Es el lugar donde están definidas las clases que contienen los formularios
 de un módulo con los que puede interactuar un usuario, así como las distintas
 validaciones que sufren los formularios.
 
\end_layout

\begin_layout Itemize

\series bold
Plantillas
\series default
: Cuando la vista genera una respuesta, es la plantilla quien se encarga
 de generar el código HTML y JavaScript, para representar los resultados
 al usuario.
\end_layout

\begin_layout Subsection
Módulo de decoradores
\end_layout

\begin_layout Standard
Este módulo contiene los decoradores usados para proteger las vistas de
 los distintos módulos que se pueden acceder vía petición HTML, así se evita
 que cualquier usuario pueda ejecutar una vista a la que no tiene acceso.
 Esto se ha realizado mediante decoradores, ya que permiten alternar de
 manera dinámica la funcionalidad de una función, método o clase, sin tener
 que realizar ningún cambio de código en la clase decorada.
\end_layout

\begin_layout Standard
Los decoradores disponibles son los siguientes:
\end_layout

\begin_layout Itemize

\series bold
login_required
\series default
: Comprueba que el usuario ha ingresado en la plataforma.
 
\end_layout

\begin_layout Itemize

\series bold
researcher_requerid
\series default
: Comprueba que el usuario es un investigador.
 
\end_layout

\begin_layout Itemize

\series bold
finished_survey
\series default
: Comprueba que el usuario ha finalizado la encuesta.
 
\end_layout

\begin_layout Itemize

\series bold
belong_researcher
\series default
: Valida que la encuesta, sección o pregunta que que quiere modificar pertenece
 al investigador en cuestión y no a otro.
 
\end_layout

\begin_layout Itemize

\series bold
valid_survey
\series default
: Comprueba que la encuesta ya se ha publicado.
 
\end_layout

\begin_layout Itemize

\series bold
there_is_stateSurvey
\series default
: Valida que existe y es valido el estado de la encuesta por parte de un
 usuario que quiere rellenar una encuesta.
\end_layout

\begin_layout Standard
Por ejemplo en la figura 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
ref{fig:proteccion_vista}
\end_layout

\end_inset

 , se puede comprobar que para acceder a la vista 
\emph on
new_survey
\emph default
, que sirve para la creación de una nueva encuesta, debemos acceder a la
 dirección 
\emph on
http://servidor/survey/new
\emph default
, pero antes de poder acceder, se comprueba que el usuario se haya autentificado
 en el sistema, mediante el decorador 
\emph on
@login_required
\emph default
, y que además el usuario tenga permisos de investigador, 
\emph on
@researcher_required
\emph default
.
 De esta forma se puede proteger las páginas a los que los usuarios pueden
 acceder.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{figure}[!tbh]
\end_layout

\begin_layout Plain Layout

 	
\backslash
begin{center}
\end_layout

\begin_layout Plain Layout


\backslash
begin{listing}[style=consola, numbers=none]
\end_layout

\begin_layout Plain Layout

@blueprint.route('/survey/new', methods = ['GET', 'POST'])
\end_layout

\begin_layout Plain Layout

@login_required
\end_layout

\begin_layout Plain Layout

@researcher_required
\end_layout

\begin_layout Plain Layout

def new_survey():
\end_layout

\begin_layout Plain Layout


\backslash
end{listing}
\end_layout

\begin_layout Plain Layout

		 
\backslash
caption{Protección de una vista}
\end_layout

\begin_layout Plain Layout

 		
\backslash
label{fig:proteccion_vista}
\end_layout

\begin_layout Plain Layout

	 
\backslash
end{center}
\end_layout

\begin_layout Plain Layout


\backslash
end{figure}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Módulo Planificador de tareas.
\end_layout

\begin_layout Standard
Este módulo se encarga de ejecutar tareas periódicas.
 Concretamente tiene definidas dos: 
\end_layout

\begin_layout Itemize
Envía periódicamente al investigador los resultados de la encuesta.
 
\end_layout

\begin_layout Itemize
En la adaptación del experimento 
\emph on
"¿Cómo son nuestros voluntarios?"
\emph default
, se decidió realizar los pagos manualmente, por lo que se envía un correo
 al responsable de los pagos, con el dinero y usuario al que debe realizar
 el pago.
\end_layout

\begin_layout Subsection
Módulo de Autentificación
\end_layout

\begin_layout Standard
En el módulo de autetificación permite las siguientes opciones:
\end_layout

\begin_layout Itemize
Registrarnos en la plataforma: Uno se puede registrar mediante el uso de
 un correo.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"auth/register".
\end_layout

\end_deeper
\begin_layout Itemize
Validarnos mediante el uso de un correo y contraseña.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"auth/loginEmail".
\end_layout

\end_deeper
\begin_layout Itemize
Validarnos mediante el uso de un servidor OpenID.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista:
\emph on
 "auth/" 
\emph default
o 
\emph on
"auth/login".
\end_layout

\end_deeper
\begin_layout Itemize
Cerrar la sesión actual.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"auth/logout".
\end_layout

\end_deeper
\begin_layout Subsection
Módulo del investigador
\end_layout

\begin_layout Standard
Este módulo permite a los usuarios que sean investigadores, las siguientes
 acciones:
\end_layout

\begin_layout Itemize
Listado de encuestas creadas por un investigador.
\end_layout

\begin_deeper
\begin_layout Itemize
A esta función se accede mediante las vistas: 
\emph on
"researcher/survey/"
\emph default
 o 
\emph on
"researcher/survey/index"
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize
Creación de encuestas: Durante la creación de una encuesta se comprueba
 que todos los campos del formulario son validos, además permite definir
 las siguientes opciones:
\end_layout

\begin_deeper
\begin_layout Itemize
Título.
\end_layout

\begin_layout Itemize
Descripción: Se hace uso de la sintaxis Markdown para el enriquecimiento
 del texto.
\end_layout

\begin_layout Itemize
Número máximo de usuarios que pueden acceder a la encuesta, si es que lo
 hay.
\end_layout

\begin_layout Itemize
Fecha de inicio de la encuesta.
\end_layout

\begin_layout Itemize
Fecha de finalización de la encuesta.
\end_layout

\begin_layout Itemize
Tiempo máximo para la realización de la encuesta, si es que lo hay.
\end_layout

\begin_layout Standard
A esta función se accede mediante la vista: "researcher/survey/new"
\end_layout

\end_deeper
\begin_layout Itemize
Modificación de una encuesta: Se permite modificar cualquier campo de una
 encuesta creada.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta a modificar.
\end_layout

\end_deeper
\begin_layout Itemize
Eliminación de una encuesta: Se permite eliminar una encuesta creada, siempre
 que no haya sido publicada.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/deleteSurvey/<int:id_survey>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta a eliminar.
\end_layout

\end_deeper
\begin_layout Itemize
Creación de consentimientos: Mediante un formulario, el investigador informa
 de los consentimientos que debe aceptar el usuario para poder participar
 en la encuesta.
 Hace uso de la sintaxis Markdown para el enriquecimiento del texto.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/consent/add"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta.
\end_layout

\end_deeper
\begin_layout Itemize
Modificación de un consentimiento.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/consent/<int:id_consent>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, e id_consent el identificador del consentimien
to
\end_layout

\end_deeper
\begin_layout Itemize
Eliminación de un consentimiento.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/consent/<int:id_consent>/delete"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, e 
\emph on
id_consent
\emph default
 el identificador del consentimiento
\end_layout

\end_deeper
\begin_layout Itemize
Creación de secciones y subsecciones: El investigador puede definir con
 total libertad el número de secciones y subsecciones que tiene una encuesta,
 además permite definir las siguientes opciones:
\end_layout

\begin_deeper
\begin_layout Itemize
Título de la sección.
\end_layout

\begin_layout Itemize
Descripción: Se hace uso de la sintaxis Markdown para el enriquecimiento
 del texto.
\end_layout

\begin_layout Itemize
Secuencia de la sección.
\end_layout

\begin_layout Itemize
Porcentaje de número de usuarios que realizan la sección.
\end_layout

\begin_layout Standard
El usuario que realice la encuesta recorrerá en profundidad el árbol generado
 por la encuesta.
 Si dos o mas ramas tienen la misma secuencia, se elige al azar que rama
 recorrer primero.
 Si dos o mas ramas con la misma secuencia, tienen un porcentaje menor que
 1, este porcentaje indica la probabilidad que hay para recorrer esa rama
 y no cualquiera de las otras que tienen la misma secuencia.
\end_layout

\begin_layout Standard
A la función de añadir una sección a una encuesta dada, se accede mediante
 la vista: 
\emph on
"researcher/survey/<int:id_survey>/section/new"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta.
\end_layout

\begin_layout Standard
A la función de añadir una sección a una sección dada, se accede mediante
 la vista: 
\emph on
"researcher/survey/<int:id_survey>/section/<int:id_section>/new"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, e 
\emph on
id_sectión
\emph default
 el identificador de la sección de la que va a colgar la nueva sección.
\end_layout

\end_deeper
\begin_layout Itemize
Modificación de una sección o subsección.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/section/<int:id_section>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, e 
\emph on
id_sectión
\emph default
 el identificador de la sección a modificar
\end_layout

\end_deeper
\begin_layout Itemize
Eliminación de una sección o subsección:
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/deleteSection/<int:id_section>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, e 
\emph on
id_sectión
\emph default
 el identificador de la sección a eliminar.
\end_layout

\end_deeper
\begin_layout Itemize
Creación de preguntas: Dada una sección, el investigador puede añadir las
 preguntas que desee a la sección.
 Las posibilidades que tiene son las siguientes:
\end_layout

\begin_deeper
\begin_layout Itemize
Preguntas cuya respuesta es Si o No, las opciones disponibles son las siguientes
:
\end_layout

\begin_deeper
\begin_layout Itemize
Texto de la pregunta: Se hace uso de la sintaxis Markdown para el enriquecimient
o del texto.
\end_layout

\begin_layout Itemize
Indicar si es una pregunta cuya respuesta es obligatoria o no.
\end_layout

\begin_layout Itemize
Respuesta correcta a la pregunta si es que la tiene, sirve para crear preguntas
 de control.
\end_layout

\begin_layout Itemize
Número máximo de intentos que tiene el usuario para responder bien a la
 pregunta.
\end_layout

\end_deeper
\begin_layout Itemize
Preguntas cuya respuesta es un texto, las opciones disponibles son las siguiente
s:
\end_layout

\begin_deeper
\begin_layout Itemize
Texto de la pregunta: Se hace uso de la sintaxis Markdown para el enriquecimient
o del texto.
\end_layout

\begin_layout Itemize
Indicar si es una pregunta cuya respuesta es obligatoria o no.
\end_layout

\begin_layout Itemize
Respuesta correcta a la pregunta si es que la tiene, sirve para crear preguntas
 de control
\end_layout

\begin_layout Itemize
Número máximo de intentos que tiene el usuario para responder bien a la
 pregunta.
\end_layout

\begin_layout Itemize
Validar que el texto introducido por el usuario en la respuesta es:
\end_layout

\begin_deeper
\begin_layout Itemize
Número entero.
\end_layout

\begin_layout Itemize
Número decimal.
\end_layout

\begin_layout Itemize
Comprobarlo mediante una expresión regular definido en sintaxis Python.
\end_layout

\end_deeper
\begin_layout Itemize
Mostrar un mensaje de error personalizado si ha introducido en un formato
 incorrecto la respuesta.
\end_layout

\end_deeper
\begin_layout Itemize
Preguntas cuya respuesta es una opción dada, las opciones disponibles son
 las siguientes.
\end_layout

\begin_deeper
\begin_layout Itemize
Texto de la pregunta: Se hace uso de la sintaxis Markdown para el enriquecimient
o del texto.
\end_layout

\begin_layout Itemize
Indicar si es una pregunta cuya respuesta es obligatoria o no.
\end_layout

\begin_layout Itemize
Respuesta correcta a la pregunta si es que la tiene, sirve para crear preguntas
 de control.
\end_layout

\begin_layout Itemize
Número máximo de intentos que tiene el usuario para responder bien a la
 pregunta.
\end_layout

\begin_layout Itemize
Formato en el que se mostrará la pregunta, hay tres posibilidades:
\end_layout

\begin_deeper
\begin_layout Itemize
Horizontal: Se mostrará las opciones mediante un radio botón, en una disposición
 horizontal.
\end_layout

\begin_layout Itemize
Vertical: Se mostrará las opciones mediante un radio botón, en una disposición
 vertical.
\end_layout

\begin_layout Itemize
Select: Se mostrará las opciones mediante un formulario de selección.
\end_layout

\end_deeper
\begin_layout Itemize
Definición de las respuestas disponibles mediante la definición de un rango
 de números, así como el salto entre ellos.
\end_layout

\begin_layout Itemize
Definición de las respuestas disponibles añadiéndolas de una en una.
\end_layout

\end_deeper
\begin_layout Itemize
Preguntas cuya respuesta es una escala likert, las opciones disponibles
 son las siguientes.
\end_layout

\begin_deeper
\begin_layout Itemize
Texto de la pregunta: Se hace uso de la sintaxis Markdown para el enriquecimient
o del texto.
\end_layout

\begin_layout Itemize
Indicar si es una pregunta cuya respuesta es obligatoria o no.
\end_layout

\begin_layout Itemize
Indicar el rango de la escala likert, que estará definida entre 0/1 y un
 número mayor que 1.
\end_layout

\begin_layout Itemize
Etiqueta opcional para indicar el significado mínimo de la escala.
\end_layout

\begin_layout Itemize
Etiqueta opcional para indicar el significado máximo de la escala
\end_layout

\begin_layout Standard
Todas las preguntas descritas anteriormente se pueden mostrar o no dependiendo
 de la respuesta dada a una pregunta de la misma sección.
\end_layout

\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/section/<int:id_section>/addQuestion"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta e 
\emph on
id_sectión
\emph default
 el identificador de la sección donde se encuentra la pregunta.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Modificación de una pregunta:
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/section/<int:id_section>/question/<int:id_que
stion>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta e 
\emph on
id_sectión
\emph default
 el identificador de la sección donde se encuentra la pregunta, e 
\emph on
id_question
\emph default
 el identificador de la pregunta a modificar
\end_layout

\end_deeper
\begin_layout Itemize
Eliminación de una pregunta:
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/<int:id_survey>/Section/<int:id_section>/deleteQuestion/<int:
id_question>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta e 
\emph on
id_section
\emph default
 el identificador de la sección donde se encuentra la pregunta, e 
\emph on
id_question
\emph default
 el identificador de la pregunta a eliminar
\end_layout

\end_deeper
\begin_layout Itemize
Duplicar sección: Permite duplicar una sección así como todas las secciones
 y preguntas que cuelgan de su rama.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista:
\end_layout

\begin_layout Itemize

\emph on
"researcher/survey/<int:id_survey>/duplicateSection/<int:id_section>/section/<in
t:id_section2>'
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, 
\emph on
id_sectión
\emph default
 el identificador de la sección a copiar, 
\emph on
id_section2
\emph default
 el identificador de la sección donde se copiará.
\end_layout

\begin_layout Itemize

\emph on
"researcher/survey/<int:id_survey>/duplicateSection/<int:id_section>/survey/'
\emph default
, siendo 
\emph on
id_survey
\emph default
 el identificador de la encuesta, 
\emph on
id_sectión
\emph default
 el identificador de la sección a copiar, se copiará directamente sobre
 la raiz, la cual es la encuesta.
\end_layout

\end_deeper
\begin_layout Itemize
Exportar una encuesta: Permite exportar a un fichero XML, la encuesta selecciona
da.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/exportSurvey/<int:id_survey>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 la encuesta a exportar
\end_layout

\end_deeper
\begin_layout Itemize
Importar una encuesta: Permite importar una encuesta mediante un fichero
 XML.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista:
\emph on
 "researcher/survey/new"
\end_layout

\end_deeper
\begin_layout Itemize
Exportar estadísticas de una encuesta: Permite exportar en un fichero CSV,
 los resultados de la encuesta seleccionada.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"researcher/survey/exportStats/<int:id_survey>"
\emph default
, siendo 
\emph on
id_survey
\emph default
 la encuesta a exportar
\end_layout

\end_deeper
\begin_layout Standard
Las vistas anteriores solo están disponibles para investigadores, además
 no se pueden editar encuestas de otros investigadores, ya que todas las
 vistas están protegidas mediante el decorador
\emph on
 "@belong_researcher".
\end_layout

\begin_layout Subsection
Módulo del encuestado
\end_layout

\begin_layout Standard
Este módulo permite a los usuarios que sean voluntarios realizar rellenar
 encuestas.
 Las acciones disponibles son las siguientes:
\end_layout

\begin_layout Itemize
Listar todas las encuestas disponibles, así como el estado de esta, ya sea
 sin empezar, empezada o finalizada.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"survey/index"
\emph default
 o 
\emph on
"survey/"
\end_layout

\end_deeper
\begin_layout Itemize
Empezar o continuar una encuesta: Es la función encargada de decidir cual
 es el siguiente paso cuando se realiza una encuesta, ya sea mostrar los
 consentimientos, mostrar una sección de la encuesta, indicar que se ha
 finalizado la encuesta o mostrar el feedback de la encuesta si es que la
 tiene.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista: 
\emph on
"survey/<int:id_survey>"
\emph default
, siendo id_survey la encuesta a realizar.
\end_layout

\end_deeper
\begin_layout Itemize
Mostrar los consentimientos: Esta función es la encargada de mostrar el
 consentimiento que el usuario debe aceptar para realizar la encuesta.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista "survey/<int:id_survey>/consent",
 siendo 
\emph on
id_survey
\emph default
 la encuesta a realizar 
\end_layout

\end_deeper
\begin_layout Itemize
Mostrar una sección: Esta función es la encargada de mostrar una sección,
 con todas las preguntas que hay en ella, además de guardar los resultados
 de las preguntas, así como los tiempos empleados en ellas.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante las vistas 
\emph on
"survey/<int:id_survey>/section/<int:id_section>"
\emph default
 o 
\emph on
"survey/<int:id_survey>/section/"
\emph default
, siendo 
\emph on
id_survey
\emph default
 la encuesta a realizar e 
\emph on
id_section
\emph default
, la sección.
\end_layout

\end_deeper
\begin_layout Standard
Todas las vistas están protegidas, de manera que es obligatorio haber ingresado
 en la plataforma, además en la vista 
\emph on
Mostrar una sección
\emph default
 solo se permite acceder a la sección que le toca realizar al usuario.
\end_layout

\begin_layout Subsection
Módulo de Feedback
\end_layout

\begin_layout Standard
Este módulo permite dar feedback sobre las decisiones tomadas en el proyecto
 
\emph on
"¿Cómo son nuestros voluntarios?"
\emph default
.
 Cada vista corresponde con una decisión concreta del experimento.
 
\end_layout

\begin_layout Itemize
Lógica: Durante el desarrollo del proyecto "¿Cómo son nuestros voluntarios?",
 se decidió que el orden del feedback sobre las decisiones tomadas, iba
 a ser el mismo que el realizado durante el experimento, y debido a que
 cada voluntario se le asigna un orden al azar, está función es la encargada
 de decidir que feedback se le va a mostrar al voluntario, siempre siguiendo
 el mismo orden de la encuesta.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista "feedback/id_survey", siendo
 id_survey la encuesta de la que recibir feedback.
\end_layout

\end_deeper
\begin_layout Itemize
Juegos de la lotería, la renta y dictador: Corresponde a las decisiones
 de las versiones de los dos juegos de la lotería y los dos juegos de la
 renta.
 Muestra la respuesta del usuario y la media dada por los demás voluntarios,
 además muestra el porcentaje de los voluntarios que han tomado la misma
 decisión que el usuario.
\end_layout

\begin_layout Itemize
Juego del ultimatum: A parte de mostrar la información que se da en los
 demás juegos, también se muestra el porcentaje de voluntarios que hubiesen
 aceptado la cantidad dada por el usuario.
\end_layout

\begin_layout Subsection
Módulo de estadísticas:
\end_layout

\begin_layout Standard
Este módulo es el encargado de generar el fichero de resultados para los
 investigadores.
 Concretamente existen dos funciones, una para encuestas genéricas y otra
 para el experimento 
\emph on
"¿Cómo son nuestros voluntarios?".

\emph default
 Ya que se adapto los resultados a la necesidad de los investigadores en
 cuanto al formato requerido por ellos para trabajar más cómodamente.
\end_layout

\begin_layout Subsection
Módulo Juegos:
\end_layout

\begin_layout Standard
Este módulo es el encargado de decidir en los juegos del experimento "¿Cómo
 son nuestros voluntarios?", que usuarios se enfrentan con quién.
 Además de buscar las respuestas dadas por los voluntarios.
\end_layout

\begin_layout Standard
A la hora de decidir que usuarios van a enfrentarse, se busca a todos los
 usuarios que no han realizado ningún enfrentamiento.
 Si este llega a un número mínimo necesario para que no existan enfrentamientos
 repetidos, se continua.
 Sino se selecciona las decisiones tomadas de otros voluntarios que ya se
 han enfrentado, pero sin posibilidad de que estos últimos vuelvan a salir
 premiados.
\end_layout

\begin_layout Subsection
Módulo de visualización de estadísticas y juegos.
\end_layout

\begin_layout Standard
Este módulo permite la visualización de los resultados de las encuestas,
 además también permite la visualización de los resultados de los juegos
 del experimento 
\emph on
"¿Cómo son nuestros voluntarios?"
\end_layout

\begin_layout Itemize
Listar todas las encuestas creadas por un investigador.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista 
\emph on
"stats/"
\emph default
 o 
\emph on
"stats/index"
\end_layout

\end_deeper
\begin_layout Itemize
Listar el resultado de una encuesta: Representa mediante una tabla el fichero
 csv de las encuestas, se puede elegir el criterio de ordenación.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista "stats/<int:id_survey>", siendo
 id_survey la encuesta de la que se desea visualizar los resultados.
\end_layout

\end_deeper
\begin_layout Itemize
Listar los juegos disponibles en una encuesta:
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista "stats/<int:id_survey>/games",
 siendo id_survey el identificador de la encuesta
\end_layout

\end_deeper
\begin_layout Itemize
Listar el resultado de un juego de una encuesta: Representa mediante una
 tabla, los resultados de de los distintos juegos de una encuesta, se puede
 elegir el criterio de ordenación.
\end_layout

\begin_deeper
\begin_layout Standard
A esta función se accede mediante la vista "stats/<int:id_survey>/games/gameX",
 siendo id_survey el identificador de la encuesta.
\end_layout

\end_deeper
\begin_layout Standard
Las vistas anteriores solo están disponibles para investigadores, además
 solo se puede acceder a las encuestas creadas por el propio investigador.
\end_layout

\begin_layout Standard
### Módulo de modelo
\end_layout

\begin_layout Standard
Este es el módulo descrito anteriormente en la sección diagrama de clases
\end_layout

\begin_layout Standard
Casi todos los demás módulos interaccionan con este Módulo.
\end_layout

\begin_layout Standard
### Módulo de configuración
\end_layout

\begin_layout Standard
Este módulo se encarga de leer la configuración de la plataforma una vez
 que se inicia está.
 Aunque no se ha señalado explícitamente, los demás módulos interaccionan
 con él si tienen que leer alguna configuración de la plataforma.
\end_layout

\begin_layout Standard
Se han tenido en cuenta las recomendaciones dadas en http://flask.pocoo.org/docs/c
onfig/#configuration-best-practices
\end_layout

\begin_layout Standard
Y se ha decidido crear un sistema de clases y herencia para la configuración
 del sistema, pudiendo cambiar el modo de funcionamiento de la aplicación
 simplemente cambiando la variable de entorno **FLASK_CONFIG**, la estructura
 que sigue y los modos disponibles son los siguientes:
\end_layout

\begin_layout Standard
[code]
\end_layout

\begin_layout Standard
class Config(object):
\end_layout

\begin_layout Standard
# configuración básica de la plataforma
\end_layout

\begin_layout Standard
class DevelopmentConfig(Config):
\end_layout

\begin_layout Standard
# Configuración de la plataforma en modo desarrollo
\end_layout

\begin_layout Standard
DEBUG = True
\end_layout

\begin_layout Standard
class TestingConfig(Config):
\end_layout

\begin_layout Standard
# Configuración de la plataforma para test unitarios
\end_layout

\begin_layout Standard
class Jmeter(Config):
\end_layout

\begin_layout Standard
# Configuración de la plataforma para la realización de pruebas de sobrecarga
\end_layout

\begin_layout Standard
class ProductionConfig(Config):
\end_layout

\begin_layout Standard
# Configuración de la plataforma en modo producción
\end_layout

\begin_layout Standard
# Se define quien es el usuario administrador y cual es el servidor de correo
 para enviar los distintos logs
\end_layout

\begin_layout Standard
class HerokuConfig(ProductionConfig):
\end_layout

\begin_layout Standard
# Configuración de la plataforma en modo producción en la nube Heroku
\end_layout

\begin_layout Standard
# Usa el sistema de logs de Heroku para almacenarlos.
\end_layout

\begin_layout Standard
class UnixConfig(ProductionConfig):
\end_layout

\begin_layout Standard
# Configuración de la plataforma en modo producción en una máquina de tipo
 Unix
\end_layout

\begin_layout Standard
# Hace uso del sistema de logs de la máquina Unix.
\end_layout

\begin_layout Standard
[/code]
\end_layout

\begin_layout Standard
Por otra parte, para facilitar el tener varias configuraciones posibles,
 se carga primeramente la configuración básica definida anteriormente y
 luego se puede reemplaza por la leída en la variable de entorno **SWARMS_SURVEY
_SETTINGS**, pudiendo cambiar fácilmente la configuración.
\end_layout

\begin_layout Standard
### Módulo shell:
\end_layout

\begin_layout Standard
Este módulo se accede mediante la consola de la plataforma, dando acceso
 a un interprete Python.
\end_layout

\begin_layout Standard
[code]
\end_layout

\begin_layout Standard
$ ./manage.py shell
\end_layout

\begin_layout Standard
// shell interactively of swarm-surveys, "import utiles" to access the administr
ation tools
\end_layout

\begin_layout Standard
In [1]: from current_app import utiles
\end_layout

\begin_layout Standard
[/code]
\end_layout

\begin_layout Standard
Entre las opciones disponible en **utiles**, está la de listar usuarios,
 dar o quitar permisos de investigador a un usuario dado o Reiniciar los
 juegos del experimento "¿Cómo son nuestros voluntarios?"
\end_layout

\begin_layout Standard
Además mediante el uso de esta interfaz de linea de comandos, se puede acceder
 a cualquier módulo definido en la plataforma.
\end_layout

\begin_layout Standard
Por ejemplo, ejecutar la función de generar los resultados de una encuesta:
\end_layout

\begin_layout Standard
[code]
\end_layout

\begin_layout Standard
In [1]: from current_app import models
\end_layout

\begin_layout Standard
In [2]: from current_app import stats
\end_layout

\begin_layout Standard
In [2]: survey = models.Survey.query.get(1)
\end_layout

\begin_layout Standard
In [3]: stats.write_stats(survey)
\end_layout

\begin_layout Standard
written file in /home/jarenere/swarm_surveys/stats_csv/¿Cómo_son_nuestros_volunt
arios?_1.csv
\end_layout

\begin_layout Standard
[/code]
\end_layout

\begin_layout Standard
### Prototipado de las ventanas y cuestiones de usabilidad
\end_layout

\begin_layout Standard
Después del análisis y el diseño de las distintas partes de la aplicación,
 se continuo con un diseño preliminar de la interfaz para el usuario.
 Se tomaron distintas ideas de las plataformas estudiadas para la elaboración
 de encuestas, así como las guías de usabilidad del proyecto KDE, http://techbas
e.kde.org/Projects/Usability/HIG
\end_layout

\begin_layout Standard
Para facilitar al investigador la navegación entre las distintas secciones,
 se decidió mostrar el árbol de secciones por completo en un lateral de
 la ventana.
 Además de mostrar en la parte superior un menú de tipo "migas de pan",
 que presenta en forma textual todos los enlaces que describen la ruta de
 una sección a partir de la raíz, siendo esta la propia encuesta.
\end_layout

\begin_layout Standard
Por otra parte para mejorar la usabilidad de la aplicación, se ha añadido
 código JavaScript en distintas páginas para ofrecer ciertas funcionalidades
 al usuario, sin tener que realizar peticiones a la plataforma web, añadiendo
 velocidad y fluidez a la plataforma.
\end_layout

\begin_layout Standard
Se decidió también añadir un editor y visualizador de código Markdown para
 poder comprobar en tiempo real el formato de texto que verían los usuarios
 a la hora de realizar encuestas.
\end_layout

\begin_layout Standard
Por otra parte para mejorar la usabilidad de la plataforma, se uso un sistema
 de URL amigables, para recordar mas fácilmente la funcionalidad de cada
 página web.
\end_layout

\begin_layout Standard
Además durante el prototipado de las ventanas, se tuvo en cuenta las funcionalid
ades que provee el framework Bootstrap, para facilitar que las distintas
 páginas se adaptasen al tamaño del navegador.
\end_layout

\begin_layout Standard
#### Esquema de navegación
\end_layout

\begin_layout Standard
#### Diseño del experimento "¿Cómo son nuestros voluntarios?"
\end_layout

\begin_layout Standard
Debido a la naturaleza del proyecto, siempre se intenta evitar el influir
 a los participantes, para que las respuestas que den sean las que realmente
 quieren dar.
 Esto incluye cualquier tipo de feedback visual, incluso el nombre del proyecto
 "¿Cómo son nuestros voluntarios?", induce a pensar como voluntario.
\end_layout

\begin_layout Standard
El diseño final para el experimento, se puede ver en las capturas XX
\end_layout

\end_body
\end_document
